window.__require=function e(t,n,o){function i(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({AwardLayer:[function(e,t,n){"use strict";cc._RF.push(t,"d5e1cdeqlJAJamaQFyHOTGv","AwardLayer");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("./Common/PopupBase"),a=e("./Common/UIUtils"),{ccclass:r,property:s,menu:c}=cc._decorator;let l=class extends i.default{constructor(){super(...arguments),this.amount=null,this.animationDuration=.3}static get path(){return"Scenes/Game/award_layer"}onLoad(){this.main||(this.main=this.node)}init(){this.scheduleOnce(()=>{this.hide()},2)}playShowAnimation(e){return new Promise(t=>{const n=this.background,o=this.main;this.node.active=!0,n.active=!0,n.opacity=0,o.active=!0,o.scale=.5,o.opacity=0,cc.tween(n).to(.5*e,{opacity:150}).start(),cc.tween(o).to(e,{scale:1,opacity:255},{easing:"smooth"}).to(.1,{scale:.9,opacity:255},{easing:"smooth"}).to(.1,{scale:1,opacity:255},{easing:"smooth"}).call(t).start()})}updateDisplay(e){let t={num:0};this.amount.string=t.num,cc.tween(t).to(1,{num:e},{progress:(e,t,n,o)=>{let i=Math.ceil(e+(t-e)*o);return this.amount.string="\u20b9"+a.UIUtils.getShortNumber(i,!0),e+(t-e)*o}}).start()}};o([s(cc.Label)],l.prototype,"amount",void 0),l=o([r],l),n.default=l,cc._RF.pop()},{"./Common/PopupBase":"PopupBase","./Common/UIUtils":"UIUtils"}],BetCell:[function(e,t,n){"use strict";cc._RF.push(t,"77370utKsJPB6mi8EO3B9Sv","BetCell");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),a=e("../Business/Data/DataManager"),r=e("../Business/Data/CommonDefine"),s=e("../Business/Logic/GameNotice"),{ccclass:c,property:l,menu:u}=cc._decorator;let p=class extends cc.Component{constructor(){super(...arguments),this.txtAmount=null,this.btnBet=null,this.betKey=null}onLoad(){i.noticeCenter.registAllNotice(this),null==this.btnBet&&(this.btnBet=this.node),this.btnBet.on(cc.Node.EventType.TOUCH_END,this.onTouchBet,this)}setBetKey(e,t){this.betKey=e,null!=t&&(this.txtAmount.string=t.toString())}onTouchBet(){if(a.default.homeData.getGameStage()!=r.GameStage.Prepare)return;if(!this.betKey.includes("Mid")&&!a.default.userData.getMidBet())return;let e=new s.NtcPlaceChips;e.betKey=this.betKey,i.noticeCenter.emit(e),a.default.userData.setMidBet(!0)}};o([l(cc.Label)],p.prototype,"txtAmount",void 0),o([l(cc.Node)],p.prototype,"btnBet",void 0),p=o([c],p),n.default=p,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex"}],BetChip:[function(e,t,n){"use strict";cc._RF.push(t,"567c4AQwM9JxJXy5gJtMWf2","BetChip");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),a=e("./Common/UIUtils"),{ccclass:r,property:s,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.txtAmount=null}onLoad(){i.noticeCenter.registAllNotice(this)}setBetSum(e){this.txtAmount.string=a.UIUtils.getShortNumber(e)}};o([s(cc.Label)],l.prototype,"txtAmount",void 0),l=o([r],l),n.default=l,cc._RF.pop()},{"../MobileKit/MKIndex":"MKIndex","./Common/UIUtils":"UIUtils"}],BetData:[function(e,t,n){"use strict";cc._RF.push(t,"9ece0iQEuVAH5ptA5hFfJkC","BetData"),Object.defineProperty(n,"__esModule",{value:!0}),n.BettingOrderInfo=n.BetAreaData=n.BetAreaInfo=void 0,n.BetAreaInfo=class{constructor(){this.chipPlace=null,this.betSum=0}},n.BetAreaData=new Map,n.BettingOrderInfo=class{constructor(){this.betKey="",this.betAmount=0}},cc._RF.pop()},{}],ChipSettingLayer:[function(e,t,n){"use strict";cc._RF.push(t,"db0a97PVdJKfKAjv7+g21vD","ChipSettingLayer");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),a=e("../Business/Data/DataManager"),r=e("./Common/PopupBase"),s=e("./Common/UIUtils"),c=e("../Business/Logic/GameNotice"),{ccclass:l,property:u,menu:p}=cc._decorator;let h=class extends r.default{constructor(){super(...arguments),this.betChipsNode=null,this.chipSelect=null,this.animationDuration=0,this.betChips=[],this.selectIdx=0,this.chipLst=[]}static get path(){return"Scenes/Game/chipSetting_layer"}onLoad(){this.main||(this.main=this.node),this.chipLst=a.default.homeData.getChipLst(),this.betChipsNode.children.forEach((e,t)=>{e.getComponentInChildren(cc.Label).string=s.UIUtils.getShortNumber(this.chipLst[t]);let n=e.getComponent(cc.Button);this.betChips.push(n)}),this.selectIdx=a.default.userData.getSelectChip(),this.chipSelect.node.setParent(this.betChips[this.selectIdx].node)}onTouchClose(){this.hide()}onTouchSelectChip(e,t){this.selectIdx=t,this.chipSelect.node.setParent(this.betChips[t].node)}onTouchConfirm(){let e=new c.NtcChipSetting;a.default.userData.setSelectChip(this.selectIdx),i.noticeCenter.emit(e),this.hide()}};o([u(cc.Node)],h.prototype,"betChipsNode",void 0),o([u(cc.Sprite)],h.prototype,"chipSelect",void 0),h=o([l],h),n.default=h,cc._RF.pop()},{"../Business/Data/DataManager":"DataManager","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/UIUtils":"UIUtils"}],CommonDefine:[function(e,t,n){"use strict";cc._RF.push(t,"9efc0rsiaVG/piSLAHE8XaR","CommonDefine"),Object.defineProperty(n,"__esModule",{value:!0}),n.PrefabList=n.Odds=n.LangList=n.SymbolTypeNum=n.SymbolType=n.GameStage=n.SceneType=n.UserType=n.DiceType=void 0,function(e){e[e.Club=0]="Club",e[e.Flag=1]="Flag",e[e.Spades=2]="Spades",e[e.Diamond=3]="Diamond",e[e.Crown=4]="Crown",e[e.Heart=5]="Heart"}(n.DiceType||(n.DiceType={})),function(e){e[e.Guest=1]="Guest",e[e.Account=2]="Account"}(n.UserType||(n.UserType={})),function(e){e[e.Loading=0]="Loading",e[e.Lobby=1]="Lobby",e[e.Game=2]="Game"}(n.SceneType||(n.SceneType={})),function(e){e[e.Wait=0]="Wait",e[e.Prepare=1]="Prepare",e[e.Spinning=2]="Spinning",e[e.Finish=3]="Finish"}(n.GameStage||(n.GameStage={})),function(e){e.Club="Club",e.Flag="Flag",e.Spades="Spades",e.Diamond="Diamond",e.Crown="Crown",e.Heart="Heart",e.Mid="Mid"}(n.SymbolType||(n.SymbolType={})),function(e){e[e.Club=0]="Club",e[e.Flag=1]="Flag",e[e.Spades=2]="Spades",e[e.Diamond=3]="Diamond",e[e.Crown=4]="Crown",e[e.Heart=5]="Heart",e[e.Mid=6]="Mid"}(n.SymbolTypeNum||(n.SymbolTypeNum={})),function(e){e[e.en=0]="en",e[e.hi=1]="hi"}(n.LangList||(n.LangList={})),n.Odds=[2.5,2,4,15,100,1250,4e4,3.2];class o{}n.PrefabList=o,o.AwardLayer="Scenes/Game/award_layer",o.ChipSettingLayer="Scenes/Game/chipSetting_layer",o.LowBalanceLayer="Scenes/Game/low_balance_layer",o.MenuLayer="Scenes/Game/menu_layer",o.BtnBet="Scenes/Game/btn_bet",o.BetChip="Scenes/Game/betChip",o.PaytableLayer="Scenes/Game/paytable_layer",o.HelpLayer="Scenes/Game/help_layer",o.LanguageLayer="Scenes/Game/language_layer",cc._RF.pop()},{}],ConfigManager:[function(e,t,n){"use strict";cc._RF.push(t,"61ecdS7zDhJaIyXsWMOoGLM","ConfigManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.setUrlConfig=function(t){e.urlConfig=t},e.setAppInfo=function(t){e.appInfo=t},e.urlConfig=null,e.appInfo=null,e}();n.default=o,cc._RF.pop()},{}],DataManager:[function(e,t,n){"use strict";cc._RF.push(t,"bb44c7d08JNtpYy1h8nVOKI","DataManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./UserData"),i=e("./HomeData"),a=function(){function e(){}return e.init=function(){e.userData=new o.default,e.homeData=new i.HomeData},e}();n.default=a,cc._RF.pop()},{"./HomeData":"HomeData","./UserData":"UserData"}],GameController:[function(e,t,n){"use strict";cc._RF.push(t,"b33e4rPpodINYZCfe4x62BN","GameController");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameController=n.CmdGameStart=void 0;const i=e("../../MobileKit/MKIndex"),a=e("../../Business/Data/ConfigManager"),r=e("../../Business/Data/DataManager");let s=class{};s=o([i.createCommand],s),n.CmdGameStart=s;class c extends i.Controller{constructor(){super(),this.setName("SettingController"),i.noticeCenter.registAllNotice(this),i.commandCenter.registAllCommand(this)}onExit(){i.noticeCenter.targetOff(this),i.commandCenter.targetOff(this)}onCmdGameStart(e){a.default.urlConfig.base;let t={};t.token=r.default.userData.getCert(),t.userid=r.default.userData.getUid(),t.betamount=e.betAmount,t.betinfo=e.betInfo,cc.log("gamestart params = "+JSON.stringify(t)),this.onGameStart(!0,t)}onGameStart(e,t){e&&this.winJudge(t)}winJudge(e){JSON.stringify(e),console.log("ANGO : ",e.betinfo),e.betinfo.forEach(()=>{})}}o([i.onCommand(s)],c.prototype,"onCmdGameStart",null),n.GameController=c,cc._RF.pop()},{"../../Business/Data/ConfigManager":"ConfigManager","../../Business/Data/DataManager":"DataManager","../../MobileKit/MKIndex":"MKIndex"}],GameNotice:[function(e,t,n){"use strict";cc._RF.push(t,"31af3V/1NxB4o3CuR3dhUJ9","GameNotice");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.NtcGameStart=n.NtcChipSetting=n.NtcPlaceChips=void 0;const i=e("../../MobileKit/MKIndex");let a=class{};a=o([i.createNotice],a),n.NtcPlaceChips=a;let r=class{};r=o([i.createNotice],r),n.NtcChipSetting=r;let s=class{};s=o([i.createNotice],s),n.NtcGameStart=s,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex"}],GameScene:[function(e,t,n){"use strict";cc._RF.push(t,"a7d62FcWh5K2YaaMxNMEQCG","GameScene");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),a=e("../Business/Data/DataManager"),r=e("../Business/Data/CommonDefine"),s=e("../Business/Data/BetData"),c=e("./BetCell"),l=e("./BetChip"),u=e("../Business/Logic/GameNotice"),p=e("./Common/UIUtils"),h=e("./Common/PopupManager"),d=e("../Business/Logic/GameController"),m=e("./Common/PrefabPool"),{ccclass:f,property:g,menu:y}=cc._decorator;let _=class extends cc.Component{constructor(){super(...arguments),this.nowLanguage=r.LangList.en,this.txtBalance=null,this.txtBet=null,this.img_diceShow=[],this.btn_bet=null,this.betChip=null,this.selectChip=null,this.txtTips=null,this.btnPlay=null,this.btnSelectChip=null,this.btnReset=null,this.btnMenu=null,this.btnReturn=null,this.betAreaMid=null,this.queue_club=null,this.queue_flag=null,this.queue_spades=null,this.queue_diamond=null,this.queue_crown=null,this.queue_heart=null,this.chipNode=null,this.playerBet=0,this.betAmount=20,this.needToShine=!0,this.chipMap=new Map,this.bettingOrder=[],this.winMap=new Map}get language(){return this.nowLanguage}set language(e){this.nowLanguage=e,i.LocalLang.setLanguage(r.LangList[e])}onLoad(){i.noticeCenter.registAllNotice(this),this.initUI(),this.initBetArea(),this.updateBalance(),this.updateSelectChip(),i.AudioEngine.playMusic("Sound/bgm_hall",!0)}initUI(){this.btnPlay.node.on("click",this.onTouchPlay,this),this.btnSelectChip.node.on("click",this.onTouchChipSet,this),this.btnReset.node.on("click",this.onTouchClear,this),this.btnMenu.node.on("click",this.onTouchMenu,this),this.btnReturn.node.on("click",this.onTouchReturn,this)}initBetArea(){this.clearBetData();for(let e=0;e<7;e++)this.spawnBetArea(this.queue_club,r.SymbolType.Club,e),this.spawnBetArea(this.queue_flag,r.SymbolType.Flag,e),this.spawnBetArea(this.queue_spades,r.SymbolType.Spades,e),this.spawnBetArea(this.queue_diamond,r.SymbolType.Diamond,e),this.spawnBetArea(this.queue_crown,r.SymbolType.Crown,e),this.spawnBetArea(this.queue_heart,r.SymbolType.Heart,e);this.betAreaMid.children.forEach((e,t)=>{let n=e.addComponent(c.default),o=r.SymbolType.Mid+t;n.setBetKey(o),s.BetAreaData.set(o,e.getChildByName("chip_place"))}),this.midBetAreaShining()}spawnBetArea(e,t,n){let o=m.default.get(r.PrefabList.BtnBet);o.setParent(e);let i=t+n;o.getComponent(c.default).setBetKey(i,n),s.BetAreaData.set(i,o)}clearBetData(){this.chipMap.forEach(e=>{m.default.put(e.chipPlace,l.default)}),this.chipMap.clear(),this.playerBet=0,this.updateBalance()}onTouchPlay(){if(a.default.homeData.getGameStage()!=r.GameStage.Prepare)return;let e=a.default.userData.getBalance();if(e<this.playerBet)return void h.default.show(r.PrefabList.LowBalanceLayer);if(0==this.playerBet)return;this.winMap.clear(),this.diceSpin(),this.txtTips.string=i.LocalLang.get("game_goodluck_tips"),console.log("ANGO\u4e0b\u6ce8\u683c :",this.chipMap);let t=[];this.chipMap.forEach((e,n)=>{let o={};o.key=n,o.value=e.betSum,t.push(o)});let n=new d.CmdGameStart;n.betAmount=this.playerBet,n.betInfo=t,this.updateBtnState(!1),a.default.userData.setBalance(e-this.playerBet),this.updateBalance()}onTouchClear(){this.clearBetData()}onTouchChipSet(){const e={mode:h.default.CacheMode.Frequent};h.default.show(r.PrefabList.ChipSettingLayer,{},e)}onTouchMenu(){h.default.show(r.PrefabList.MenuLayer)}onTouchReturn(){if(0==this.bettingOrder.length)return;let e=this.bettingOrder.pop(),t=this.chipMap.get(e.betKey),n=t.betSum-e.betAmount;t.chipPlace.getComponent(l.default).setBetSum(n),t.betSum=n,0==t.betSum&&(m.default.put(t.chipPlace,l.default),this.chipMap.delete(e.betKey)),this.playerBet-=e.betAmount,this.updateBalance()}diceSpin(){a.default.homeData.setGameStage(r.GameStage.Spinning);let e=cc.tween(this.node);e.call(()=>{this.diceShow()}).delay(.05).union().repeatForever().start(),this.scheduleOnce(()=>{e.stop(),this.diceStop()},1)}diceStop(){let e=[];for(let o=0;o<6;o++){let t=i.Utils.randRange(0,5);e.push(t)}e=e.sort((e,t)=>e-t);let t="";e.forEach(e=>{t+=e.toString()});let n=Array.from(function(e){return e.match(/(.)\1{0,}/g).sort((e,t)=>t.length-e.length).join("")}(t));this.txtTips.string="",this.resultJudgment(n.map(Number))}resultJudgment(e){console.log("ANGO : \u64f2\u9ab0\u7d50\u679c : ",e),this.diceShow(e);let t=new Map;for(let i=0;i<6;i++)t.set(r.SymbolTypeNum[i],0);e.forEach(e=>{let n=r.DiceType[e],o=t.get(n);o+=1,t.set(n,o)});let n=i.Utils.maxCountElement(e),o=[];t.forEach((e,t)=>{o.push(t+e)}),n.forEach(e=>{o.push(r.SymbolType.Mid+e)}),console.log("ANGO : WinArray : ",o);let c=0;o.forEach(e=>{if(this.chipMap.has(e)){let t=0;if(e.includes("Mid"))this.winMap.set(e,s.BetAreaData.get(e).parent),t=r.Odds[7];else{this.winMap.set(e,s.BetAreaData.get(e));let n=e.slice(-1);t=r.Odds[n]}let n=this.chipMap.get(e).betSum*t;c+=n}}),console.log("ANGO : WinningSum : ",c),a.default.homeData.setGameStage(r.GameStage.Finish),0!=c?(this.winBetAreaShining(),this.scheduleOnce(()=>{let e=new u.NtcGameStart;e.award=c,i.noticeCenter.emit(e)},1),this.scheduleOnce(this.returnPrepareStage,3.5)):this.returnPrepareStage()}diceShow(e){for(let t=0;t<6;t++)if(e)this.setDiceShow(this.img_diceShow[t],e[t]);else{let e=i.Utils.randRange(0,5);this.setDiceShow(this.img_diceShow[t],e)}}setDiceShow(e,t){let n="";switch(t){case r.DiceType.Club:n="img_club";break;case r.DiceType.Crown:n="img_crown";break;case r.DiceType.Diamond:n="img_diamond";break;case r.DiceType.Flag:n="img_flag";break;case r.DiceType.Heart:n="img_heart";break;case r.DiceType.Spades:n="img_spades"}e.spriteFrame=cc.resources.get("Texture/Game/"+n,cc.SpriteFrame)}returnPrepareStage(){this.updateBtnState(!0),a.default.homeData.setGameStage(r.GameStage.Prepare)}midBetAreaShining(){this.betAreaMid.children.forEach(e=>{let t=e.getComponentsInChildren(cc.Sprite);cc.tween(t[2].node).tag(1).to(.5,{opacity:0},{easing:"smooth"}).to(.5,{opacity:255},{easing:"smooth"}).union().repeat(2).to(.5,{opacity:0},{easing:"smooth"}).start()})}extraBetAreaShining(){s.BetAreaData.forEach((e,t)=>{if(!t.includes("Mid")){let t=e.getComponentsInChildren(cc.Sprite),n=.5;cc.tween(t[2].node).tag(2).to(n,{opacity:255},{easing:"smooth"}).to(n,{opacity:0},{easing:"smooth"}).union().repeat(3).start()}})}winBetAreaShining(){this.winMap.forEach(e=>{let t=e.getComponentsInChildren(cc.Sprite);cc.tween(t[2].node).tag(3).to(.5,{opacity:255},{easing:"smooth"}).to(.5,{opacity:0},{easing:"smooth"}).union().repeat(4).start()})}updateBtnState(e){this.btnMenu.interactable=e,this.btnReset.interactable=e,this.btnReturn.interactable=e,this.btnSelectChip.interactable=e,this.btnPlay.interactable=e}updateBalance(){this.txtBalance.string="\u20b9"+p.UIUtils.getShortNumber(a.default.userData.getBalance(),!0),this.txtBet.string="\u20b9"+p.UIUtils.getShortNumber(this.playerBet,!0),0==this.playerBet&&a.default.homeData.getGameStage()==r.GameStage.Prepare?(this.txtTips.string=i.LocalLang.get("game_place_tips"),this.btnReset.interactable=!1,this.btnPlay.interactable=!1,this.btnReturn.interactable=!1,a.default.userData.setMidBet(!1)):a.default.homeData.getGameStage()!=r.GameStage.Prepare?(this.btnReset.interactable=!1,this.btnPlay.interactable=!1,this.btnReturn.interactable=!1):(this.btnReset.interactable=!0,this.btnPlay.interactable=!0,this.btnReturn.interactable=!0)}updateSelectChip(){let e=a.default.homeData.getChipLst(),t=a.default.userData.getSelectChip();this.betAmount=e[t],this.selectChip.string=p.UIUtils.getShortNumber(this.betAmount)}onPlaceChips(e){let t=s.BetAreaData.get(e.betKey);if(this.chipMap.has(e.betKey)){let t=this.chipMap.get(e.betKey),n=t.betSum+this.betAmount;t.betSum=n,t.chipPlace.getComponent(l.default).setBetSum(n)}else{let n=m.default.get(r.PrefabList.BetChip);n.setParent(t),n.getComponent(l.default).setBetSum(this.betAmount);let o=new s.BetAreaInfo;o.chipPlace=n,o.betSum=this.betAmount,this.chipMap.set(e.betKey,o)}let n=new s.BettingOrderInfo;n.betKey=e.betKey,n.betAmount=this.betAmount,this.bettingOrder.push(n),this.playerBet+=this.betAmount,this.updateBalance(),this.needToShine&&(this.extraBetAreaShining(),this.needToShine=!1)}onChipSetting(e){this.updateSelectChip()}onGameStart(e){const t={mode:h.default.CacheMode.Frequent};let n=a.default.userData.getBalance();a.default.userData.setBalance(n+e.award),this.updateBalance(),h.default.show(r.PrefabList.AwardLayer,e.award,t)}};o([g({visible:!1})],_.prototype,"nowLanguage",void 0),o([g({type:cc.Enum(r.LangList),displayName:"\u8bed\u8a00"})],_.prototype,"language",null),o([g(cc.Label)],_.prototype,"txtBalance",void 0),o([g(cc.Label)],_.prototype,"txtBet",void 0),o([g([cc.Sprite])],_.prototype,"img_diceShow",void 0),o([g(cc.Prefab)],_.prototype,"btn_bet",void 0),o([g(cc.Prefab)],_.prototype,"betChip",void 0),o([g(cc.Label)],_.prototype,"selectChip",void 0),o([g(cc.Label)],_.prototype,"txtTips",void 0),o([g(cc.Button)],_.prototype,"btnPlay",void 0),o([g(cc.Button)],_.prototype,"btnSelectChip",void 0),o([g(cc.Button)],_.prototype,"btnReset",void 0),o([g(cc.Button)],_.prototype,"btnMenu",void 0),o([g(cc.Button)],_.prototype,"btnReturn",void 0),o([g(cc.Node)],_.prototype,"betAreaMid",void 0),o([g(cc.Node)],_.prototype,"queue_club",void 0),o([g(cc.Node)],_.prototype,"queue_flag",void 0),o([g(cc.Node)],_.prototype,"queue_spades",void 0),o([g(cc.Node)],_.prototype,"queue_diamond",void 0),o([g(cc.Node)],_.prototype,"queue_crown",void 0),o([g(cc.Node)],_.prototype,"queue_heart",void 0),o([g(cc.Node)],_.prototype,"chipNode",void 0),o([i.onNotice(u.NtcPlaceChips)],_.prototype,"onPlaceChips",null),o([i.onNotice(u.NtcChipSetting)],_.prototype,"onChipSetting",null),o([i.onNotice(u.NtcGameStart)],_.prototype,"onGameStart",null),_=o([f],_),n.default=_,cc._RF.pop()},{"../Business/Data/BetData":"BetData","../Business/Data/CommonDefine":"CommonDefine","../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../Business/Logic/GameNotice":"GameNotice","../MobileKit/MKIndex":"MKIndex","./BetCell":"BetCell","./BetChip":"BetChip","./Common/PopupManager":"PopupManager","./Common/PrefabPool":"PrefabPool","./Common/UIUtils":"UIUtils"}],HeartBeatHandler:[function(e,t,n){"use strict";cc._RF.push(t,"cbbe6PK4uNJaqhiv8nPLltL","HeartBeatHandler"),Object.defineProperty(n,"__esModule",{value:!0}),n.HeartBeatHandler=void 0;var o=function(){function e(){this.m_idle=10,this.m_maxMissCount=2,this.m_idleCallBack=null,this.m_timeOutCallBack=null,this.m_missCallBack=null,this.m_logName="",this.m_curMissCount=0,this.m_lastTickTime=-1,this.m_curIdle=-1,cc.director.getScheduler().enableForTarget(this)}return Object.defineProperty(e.prototype,"idle",{set:function(e){this.m_idle=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxMissCount",{set:function(e){this.m_maxMissCount=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idleCallBack",{set:function(e){this.m_idleCallBack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeOutCallBack",{set:function(e){this.m_timeOutCallBack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"missCallBack",{set:function(e){this.m_missCallBack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logName",{set:function(e){this.m_logName=e},enumerable:!1,configurable:!0}),e.prototype.startIdle=function(){this.clearState();var e=(new Date).getTime();this.m_lastTickTime=e,cc.director.getScheduler().unscheduleAllForTarget(this),cc.director.getScheduler().schedule(this.onIdleTime,this,1),cc.log(this.m_logName+" start idle.")},e.prototype.stopIdle=function(){this.m_curMissCount=0,this.m_lastTickTime=-1,cc.director.getScheduler().unscheduleAllForTarget(this),cc.log(this.m_logName+" stop idle.")},e.prototype.onReceiveHeartBeat=function(){this.clearState()},e.prototype.clearState=function(){this.m_curMissCount=0,this.m_curIdle=this.m_idle},e.prototype.sendIdle=function(){this.m_curMissCount++,2==this.m_curMissCount&&(cc.log(this.m_logName+" miss heart beat."),null!=this.m_missCallBack&&this.m_missCallBack()),this.m_maxMissCount>0&&this.m_curMissCount>this.m_maxMissCount?this.onHeartBeatTimeOut():null!=this.m_idleCallBack&&this.m_idleCallBack()},e.prototype.onIdleTime=function(e){var t=(new Date).getTime();this.m_lastTickTime>0&&(e=(t-this.m_lastTickTime)/1e3),this.m_lastTickTime=t,e>this.m_idle*this.m_maxMissCount?this.onHeartBeatTimeOut():(this.m_curIdle-=e,this.m_curIdle<=0&&(this.m_curIdle=this.m_idle,this.sendIdle()))},e.prototype.onHeartBeatTimeOut=function(){cc.log(this.m_logName+" heart beat time out."),this.stopIdle(),null!=this.m_timeOutCallBack&&this.m_timeOutCallBack()},e}();n.HeartBeatHandler=o,cc._RF.pop()},{}],HomeData:[function(e,t,n){"use strict";cc._RF.push(t,"43833cz8yRD7r9Zq0qV9kBo","HomeData"),Object.defineProperty(n,"__esModule",{value:!0}),n.HomeData=n.MaintainData=void 0;const o=e("./CommonDefine");n.MaintainData=class{constructor(){this.m_start=0,this.m_end=0,this.m_content=new Map,this.m_hasData=!1}isNearTime(){return this.m_hasData}isMaintainTime(){var e=(new Date).getTime();return e>this.m_start&&e<this.m_end}},n.HomeData=class{constructor(){this.m_chipsUnit=1,this.m_chipLst=[],this.m_gameStage=o.GameStage.Prepare}getChipsUnit(){return this.m_chipsUnit}setChipsUnit(e){this.m_chipsUnit=e}getChipLst(){return this.m_chipLst}setChipLst(e){this.m_chipLst=e}getGameStage(){return this.m_gameStage}setGameStage(e){this.m_gameStage=e}},cc._RF.pop()},{"./CommonDefine":"CommonDefine"}],LanguageLayer:[function(e,t,n){"use strict";cc._RF.push(t,"de8164TwFRB+LdFXf1H7BpI","LanguageLayer");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),a=e("./Common/PopupBase"),{ccclass:r,property:s,menu:c}=cc._decorator;let l=class extends a.default{constructor(){super(...arguments),this.langBtnArr=[],this.animationDuration=0,this.langIdx=0}static get path(){return"Scenes/Game/language_layer"}onLoad(){this.main||(this.main=this.node),i.noticeCenter.registAllNotice(this),this.langArr=["en","hi"];let e=i.LocalLang.getLanguage(),t=this.langArr.indexOf(e);t>=0&&(this.langBtnArr[t].check(),this.langIdx=t)}onTouchClose(){this.hide()}onTouchLang(e,t){this.langIdx=Number(t)}onTouchConfirm(){i.LocalLang.setLanguage(this.langArr[this.langIdx]),this.hide()}};o([s([cc.Toggle])],l.prototype,"langBtnArr",void 0),l=o([r],l),n.default=l,cc._RF.pop()},{"../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase"}],LoadingConfig:[function(e,t,n){"use strict";cc._RF.push(t,"ce28cPR/G1B07ofLePg+SKH","LoadingConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.LoadingResLst=void 0,n.LoadingResLst=new Map,n.LoadingResLst.set("Texture/Game/img_club",cc.SpriteFrame),n.LoadingResLst.set("Texture/Game/img_diamond",cc.SpriteFrame),n.LoadingResLst.set("Texture/Game/img_flag",cc.SpriteFrame),n.LoadingResLst.set("Texture/Game/img_crown",cc.SpriteFrame),n.LoadingResLst.set("Texture/Game/img_heart",cc.SpriteFrame),n.LoadingResLst.set("Texture/Game/img_spades",cc.SpriteFrame),n.LoadingResLst.set("Sound/bgm_hall",cc.AudioClip),n.LoadingResLst.set("Scenes/Game/betChip",cc.Prefab),n.LoadingResLst.set("Scenes/Game/btn_bet",cc.Prefab),cc._RF.pop()},{}],LoadingScene:[function(e,t,n){"use strict";cc._RF.push(t,"b3227XK/V5PI5kdwcCTTjvS","LoadingScene");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),a=e("../Business/Data/DataManager"),r=e("../Business/Data/ConfigManager"),s=e("../Business/Data/CommonDefine"),c=e("../Business/Logic/SceneController"),l=e("./LoadingConfig"),u=e("../Business/Logic/GameController"),{ccclass:p,property:h,menu:d}=cc._decorator;let m=class extends cc.Component{constructor(){super(...arguments),this.label=null,this.urlConfig=null,this.appInfo=null}onLoad(){i.noticeCenter.registAllNotice(this),this.initApp()}initApp(){i.commandCenter.addController(new c.SceneController),a.default.init(),a.default.userData.setBalance(1e6),a.default.homeData.setChipLst([100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5]),a.default.homeData.setChipsUnit(100),i.LocalLang.setLanguage("en"),i.commandCenter.addController(new u.GameController),r.default.setUrlConfig(this.urlConfig.json),r.default.setAppInfo(this.appInfo.json),this.loadRes()}loadRes(){let e=!0;for(let[t,n]of l.LoadingResLst)cc.resources.load(t,n,this.onLoadProgress.bind(this),t=>{t&&(cc.log("loading res error, ",t),e=!1)});e&&this.gotoNextScene()}onLoadProgress(){}gotoNextScene(){i.commandCenter.emit(new c.CmdScene(s.SceneType.Lobby))}};o([h(cc.Label)],m.prototype,"label",void 0),o([h(cc.JsonAsset)],m.prototype,"urlConfig",void 0),o([h(cc.JsonAsset)],m.prototype,"appInfo",void 0),m=o([p],m),n.default=m,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Data/ConfigManager":"ConfigManager","../Business/Data/DataManager":"DataManager","../Business/Logic/GameController":"GameController","../Business/Logic/SceneController":"SceneController","../MobileKit/MKIndex":"MKIndex","./LoadingConfig":"LoadingConfig"}],LobbyScene:[function(e,t,n){"use strict";cc._RF.push(t,"5d65cjvHR5ABIhyPmNJdRaJ","LobbyScene");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),a=e("../Business/Data/CommonDefine"),r=e("../Business/Logic/SceneController"),{ccclass:s,property:c,menu:l}=cc._decorator;let u=class extends cc.Component{onLoad(){i.noticeCenter.registAllNotice(this),i.commandCenter.emit(new r.CmdScene(a.SceneType.Game))}onTouchStart(){i.commandCenter.emit(new r.CmdScene(a.SceneType.Game))}};u=o([s],u),n.default=u,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../Business/Logic/SceneController":"SceneController","../MobileKit/MKIndex":"MKIndex"}],LowBalanceLayer:[function(e,t,n){"use strict";cc._RF.push(t,"4b20csg+IJOZo4kG4JnQjIw","LowBalanceLayer");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("./Common/PopupBase"),{ccclass:a,property:r,menu:s}=cc._decorator;let c=class extends i.default{constructor(){super(...arguments),this.animationDuration=0}static get path(){return"Scenes/Game/low_balance_layer"}onLoad(){this.main||(this.main=this.node),this.scheduleOnce(()=>{this.hide()},2)}};c=o([a],c),n.default=c,cc._RF.pop()},{"./Common/PopupBase":"PopupBase"}],MKActionQueue:[function(e,t,n){"use strict";cc._RF.push(t,"7733b8JdpNIHYxZ1k+2nx9N","MKActionQueue"),Object.defineProperty(n,"__esModule",{value:!0}),n.ActionQueue=void 0;var o=function(){function e(){this.m_actionQueue=null,this.m_delay=0,this.m_actionQueue=[],cc.director.getScheduler().enableForTarget(this),cc.director.getScheduler().scheduleUpdate(this,0,!1)}return e.prototype.postAction=function(e,t){this.m_actionQueue.push({func:e,param:t})},e.prototype.setDelayTime=function(e){e<cc.macro.FLT_EPSILON||this.m_delay<e&&(this.m_delay=e)},e.prototype.clear=function(){this.clearDelayTime(),this.removeAllAction()},e.prototype.clearDelayTime=function(){this.m_delay=0},e.prototype.removeAllAction=function(){this.m_actionQueue.length=0},e.prototype.update=function(e){if(this.m_delay>0&&(this.m_delay-=e),this.m_actionQueue.length>0&&this.m_delay<cc.macro.FLT_EPSILON){var t=this.m_actionQueue.shift();t.func(t.param)}},e.prototype.onExit=function(){this.clear(),cc.director.getScheduler().unscheduleAllForTarget(this)},e}();n.ActionQueue=o,cc._RF.pop()},{}],MKAudioEngine:[function(e,t,n){"use strict";cc._RF.push(t,"1950dWg/apGgKPh5p5a+7i+","MKAudioEngine"),Object.defineProperty(n,"__esModule",{value:!0}),n.AudioEngine=void 0;let o=!1,i=!1,a=null,r=!1;class s{static playEffect(e,t=!1){if(o){if(e instanceof cc.AudioClip)return cc.audioEngine.playEffect(e,t);{let n=cc.resources.get(e);if(null!=n)return cc.audioEngine.playEffect(n,t)}}return 0}static stopEffect(e){e>0&&cc.audioEngine.stopEffect(e)}static playMusic(e,t=!1){if(e instanceof cc.AudioClip)a=e;else{let t=cc.resources.get(e);null!=t&&(a=t)}r=t,i&&cc.audioEngine.playMusic(a,r)}static stopMusic(){a=null,cc.audioEngine.stopMusic()}static setEffectsVolume(e){cc.audioEngine.setEffectsVolume(e)}static setMusicVolume(e){cc.audioEngine.setMusicVolume(e)}static setEffectsEnabled(e){o=e,e||cc.audioEngine.stopAllEffects()}static setMusicEnabled(e){i=e,e?null!=a&&cc.audioEngine.playMusic(a,r):cc.audioEngine.stopMusic()}static setMute(e){s.setEffectsEnabled(!e),s.setMusicEnabled(!e)}static isMute(){return i&&o}static isMusicPlaying(){return cc.audioEngine.isMusicPlaying()}static pauseMusic(){cc.audioEngine.pauseMusic()}}n.AudioEngine=s,cc._RF.pop()},{}],MKCommandCenter:[function(e,t,n){"use strict";cc._RF.push(t,"36eecgRfGBIvrNItfzw/c9j","MKCommandCenter"),Object.defineProperty(n,"__esModule",{value:!0}),n.onCommand=n.commandCenter=n.CommandCenter=n.Controller=n.createCommand=void 0;var o=0;n.createCommand=function(e){e.Type="Command"+o++,e.prototype.getType=function(){return e.Type}};var i=function(){function e(){this.name=""}return e.prototype.setName=function(e){this.name=e},e.prototype.getName=function(){return this.name},e.prototype.onExit=function(){},e}();n.Controller=i;var a=function(){function e(){this.m_controllers=new Map,this.m_eventTarget=new cc.EventTarget}return e.prototype.addController=function(e){var t=e.getName();this.m_controllers.get(t)?(cc.log("MKCommandCenter warning, controller already exist"),e.onExit()):this.m_controllers.set(t,e)},e.prototype.removeController=function(e){var t=this.m_controllers.get(e);t&&(t.onExit(),this.targetOff(t),this.m_controllers.delete(e))},e.prototype.hasController=function(e){return this.m_controllers.get(e)},e.prototype.on=function(e,t,n){this.m_eventTarget.on(e.Type,t,n)},e.prototype.off=function(e,t,n){this.m_eventTarget.off(e.Type,t,n)},e.prototype.registAllCommand=function(e){if(e.commandList)for(var t=0,n=e.commandList;t<n.length;t++){var o=n[t];this.on(o.command,e[o.methodName],e)}},e.prototype.targetOff=function(e){this.m_eventTarget.targetOff(e)},e.prototype.emit=function(e){this.m_eventTarget.hasEventListener(e.getType())?this.m_eventTarget.emit(e.getType(),e):cc.log("MKCommandCenter err : no command handler, command type = "+e.getType())},e}();n.CommandCenter=a,n.commandCenter=new a,n.onCommand=function(e){return function(t,n){t.commandList||(t.commandList=[]),t.commandList.push({command:e,methodName:n})}},cc._RF.pop()},{}],MKCryptoUtils:[function(e,t,n){"use strict";cc._RF.push(t,"1ff71vS4J1NA7ytlCGJPgtt","MKCryptoUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoUtils=void 0;var o=function(){function e(){}return e.md5=function(e){return CryptoJS.MD5(e).toString()},e.base64Encode=function(e){var t=CryptoJS.enc.Utf8.parse(e);return CryptoJS.enc.Base64.stringify(t)},e.base64Decode=function(e){return CryptoJS.enc.Base64.parse(e).toString(CryptoJS.enc.Utf8)},e}();n.CryptoUtils=o,cc._RF.pop()},{}],MKHttp:[function(e,t,n){"use strict";cc._RF.push(t,"0073dUDVQRAsofk0kRCNO0I","MKHttp"),Object.defineProperty(n,"__esModule",{value:!0}),n.Http=void 0;var o=function(){function e(){}return e.formatParams=function(e){var t="",n=!1;for(var o in e)n?t+="&":n=!0,t+=o+"="+e[o];return t},e.get=function(t,n,o,i){void 0===i&&(i=e.ContentType.Form);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState)if(a.status>=200&&a.status<400){var e={};if(""!=a.responseText)try{e=JSON.parse(a.responseText)}catch(n){cc.log("http get result parse failed! url = %s",t)}o(!0,e)}else cc.log("http get error! code = %s, url = %s",a.status,t),o(!1,null)},a.onerror=function(){cc.log("http get error! url = %s",t),o(!1,null)},a.ontimeout=function(){cc.log("http get timeout! url = %s",t),o(!1,null)},i==e.ContentType.Json?(a.open("GET",t,!0),a.setRequestHeader("Content-Type","application/json; charset=utf-8"),a.send(n?JSON.stringify(n):null)):(n&&(t+="?"+e.formatParams(n)),a.open("GET",t,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send())},e.post=function(t,n,o,i){void 0===i&&(i=e.ContentType.Form);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState)if(a.status>=200&&a.status<400){var e={};if(""!=a.responseText)try{e=JSON.parse(a.responseText)}catch(n){cc.log("http post result parse failed! url = %s",t)}o(!0,e)}else cc.log("http post error! code = %s, url = %s",a.status,t),o(!1,null)},a.onerror=function(){cc.log("http post error! url = %s",t),o(!1,null)},a.ontimeout=function(){cc.log("http post timeout! url = %s",t),o(!1,null)},a.open("POST",t,!0),i==e.ContentType.Json?(a.setRequestHeader("Content-Type","application/json; charset=utf-8"),a.send(n?JSON.stringify(n):null)):(a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(n?e.formatParams(n):null))},e.delete=function(t,n,o,i){void 0===i&&(i=e.ContentType.Form);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState)if(a.status>=200&&a.status<400){var e={};if(""!=a.responseText)try{e=JSON.parse(a.responseText)}catch(n){cc.log("http delete result parse failed! url = %s",t)}o(!0,e)}else cc.log("http delete error! code = %s, url = %s",a.status,t),o(!1,null)},a.onerror=function(){cc.log("http delete error! url = %s",t),o(!1,null)},a.ontimeout=function(){cc.log("http delete timeout! url = %s",t),o(!1,null)},i==e.ContentType.Json?(a.open("DELETE",t,!0),a.setRequestHeader("Content-Type","application/json; charset=utf-8"),a.send(n?JSON.stringify(n):null)):(n&&(t+="?"+e.formatParams(n)),a.open("DELETE",t,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send())},e.ContentType={Form:1,Json:2},e}();n.Http=o,cc._RF.pop()},{}],MKImageDownloader:[function(e,t,n){"use strict";cc._RF.push(t,"4919aB9yv1POaDSwtAZW/Qh","MKImageDownloader"),Object.defineProperty(n,"__esModule",{value:!0}),n.imageDowloader=n.ImageDownloader=void 0;var o=e("./MKCryptoUtils"),i=function(){function e(){this.m_observers=null,this.m_observers=[]}return e.prototype.loadUrl=function(e,t){for(var n=!1,o=0,i=this.m_observers.length;o<i;++o){var a=this.m_observers[o];if(e==a.url){a.callback.push(t),n=!0;break}}n||(this.m_observers.push({url:e,callback:[t]}),this.downloadImage(e))},e.prototype.onDownloadImage=function(e,t){for(var n=this.m_observers.length-1;n>=0;--n){var o=this.m_observers[n];if(e==o.url){for(var i=o.callback,a=0;a<i.length;++a)i[a](e,t);this.m_observers.splice(n,1);break}}},e.prototype.downloadImage=function(e){var t=jsb.fileUtils.getWritablePath()+"net_image/",n=t+o.CryptoUtils.md5(e)+".jpg";if(jsb.fileUtils.isFileExist(n))this.onDownloadImage(e,n);else{jsb.fileUtils.isDirectoryExist(t)||jsb.fileUtils.createDirectory(t);var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status?this.saveFile(e,n,i.response):cc.log("Remote download file failed."))}.bind(this),i.responseType="arraybuffer",i.open("GET",e,!0),i.send()}},e.prototype.saveFile=function(e,t,n){jsb.fileUtils.writeDataToFile(new Uint8Array(n),t)?this.onDownloadImage(e,t):cc.log("Remote write file failed.")},e.prototype.clearCache=function(){var e=jsb.fileUtils.getWritablePath()+"net_image/";jsb.fileUtils.listFiles(e).length>100&&jsb.fileUtils.removeDirectory(e)},e}();n.ImageDownloader=i,n.imageDowloader=new i,cc._RF.pop()},{"./MKCryptoUtils":"MKCryptoUtils"}],MKIndex:[function(e,t,n){"use strict";cc._RF.push(t,"0f526BZPmpBr7wVUh62Ltxm","MKIndex");var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./Common/MKCryptoUtils"),n),i(e("./Common/MKLocalLang"),n),i(e("./Common/MKSystem"),n),i(e("./Common/MKUtils"),n),i(e("./Common/MKImageDownloader"),n),i(e("./Common/MKAudioEngine"),n),i(e("./Common/HeartBeatHandler"),n),i(e("./Event/MKCommandCenter"),n),i(e("./Event/MKNoticeCenter"),n),i(e("./Event/MKActionQueue"),n),i(e("./Network/MKHttp"),n),i(e("./Network/MKSocket"),n),cc._RF.pop()},{"./Common/HeartBeatHandler":"HeartBeatHandler","./Common/MKAudioEngine":"MKAudioEngine","./Common/MKCryptoUtils":"MKCryptoUtils","./Common/MKImageDownloader":"MKImageDownloader","./Common/MKLocalLang":"MKLocalLang","./Common/MKSystem":"MKSystem","./Common/MKUtils":"MKUtils","./Event/MKActionQueue":"MKActionQueue","./Event/MKCommandCenter":"MKCommandCenter","./Event/MKNoticeCenter":"MKNoticeCenter","./Network/MKHttp":"MKHttp","./Network/MKSocket":"MKSocket"}],MKLocalLang:[function(e,t,n){"use strict";cc._RF.push(t,"26623qYW/1OJ7PqJm16Um6d","MKLocalLang"),Object.defineProperty(n,"__esModule",{value:!0}),n.LocalLang=void 0;class o{static checkInit(){this.language||this.setLanguage("en")}static setLanguage(e){this.language!==e&&(this.language=e,this.reloadLabel(),this.reloadSprite())}static getLanguage(){return this.language}static _addOrDelLabel(e,t){if(t)this.labelArr.push(e);else{let t=this.labelArr.indexOf(e);-1!==t&&this.labelArr.splice(t,1)}}static get(e,t){if(this.checkInit(),null==t||0===t.length)return this.labelData[e]||e;let n=this.labelData[e]||e;for(let o=0;o<t.length;o++){let e=new RegExp("#"+o,"g");n=n.replace(e,t[o])}return n}static _addOrDelSprite(e,t){if(t)this.spriteArr.push(e);else{let t=this.spriteArr.indexOf(e);-1!==t&&this.spriteArr.splice(t,1)}}static _getSprite(e,t){this.checkInit(),cc.resources.load("i18n/sprite/"+this.language+"/"+e,cc.SpriteFrame,(e,n)=>{if(e)return t(null);t(n)})}static reloadLabel(){let e="i18n/label/"+this.language;cc.resources.load(e,(e,t)=>{e?(console.error(e),this.labelData={}):this.labelData=t.json;for(let n of this.labelArr)n._resetValue()})}static reloadSprite(){for(let e of this.spriteArr)e._resetValue()}}n.LocalLang=o,o.language="",o.labelArr=[],o.labelData={},o.spriteArr=[],cc._RF.pop()},{}],MKNoticeCenter:[function(e,t,n){"use strict";cc._RF.push(t,"79a78Glip9HQ5SpEWfy23e+","MKNoticeCenter"),Object.defineProperty(n,"__esModule",{value:!0}),n.onNotice=n.noticeCenter=n.NoticeCenter=n.createNotice=void 0;var o=0;n.createNotice=function(e){e.Type="Notice"+o++,e.prototype.getType=function(){return e.Type}};var i=function(){function e(){this.m_eventTarget=new cc.EventTarget}return e.prototype.on=function(e,t,n){this.m_eventTarget.on(e.Type,t,n)},e.prototype.off=function(e,t,n){this.m_eventTarget.off(e.Type,t,n)},e.prototype.registAllNotice=function(e){if(e.noticeList)for(var t=0,n=e.noticeList;t<n.length;t++){var o=n[t];this.on(o.notice,e[o.methodName],e)}},e.prototype.targetOff=function(e){this.m_eventTarget.targetOff(e)},e.prototype.emit=function(e){this.m_eventTarget.emit(e.getType(),e)},e}();n.NoticeCenter=i,n.noticeCenter=new i,n.onNotice=function(e){return function(t,n){t.noticeList||(t.noticeList=[]),t.noticeList.push({notice:e,methodName:n})}},cc._RF.pop()},{}],MKSocket:[function(e,t,n){"use strict";cc._RF.push(t,"9629bn3i9BIyKAXnP94lWgi","MKSocket"),Object.defineProperty(n,"__esModule",{value:!0}),n.onMsg=n.Socket=void 0;var o=function(){function e(){this.m_socket=null,this.m_eventTarget=new cc.EventTarget,this.m_connected=!1}return e.prototype.connect=function(){},e.prototype.disconnect=function(){this.m_connected=!1},e.prototype.isConnected=function(){return this.m_socket&&this.m_connected},e.prototype.send=function(){},e.prototype.on=function(e,t,n){this.m_eventTarget.on(e.toString(),t,n)},e.prototype.off=function(e,t,n){this.m_eventTarget.off(e.toString(),t,n)},e.prototype.registAllMsg=function(e){if(e.msgList)for(var t=0,n=e.msgList;t<n.length;t++){var o=n[t];this.on(o.msgID,e[o.methodName],e)}},e.prototype.targetOff=function(e){this.m_eventTarget.targetOff(e)},e.prototype.onConnect=function(t){this.m_connected=!0,this.m_eventTarget.emit(e.Connect,this,t)},e.prototype.onMessage=function(t){this.m_eventTarget.emit(e.Message,this,t),this.m_eventTarget.hasEventListener(t.msgID)?this.m_eventTarget.emit(t.msgID,t):cc.log("MKSocket err : no socket message handler, messageID = "+t.msgID)},e.prototype.onError=function(t){this.m_eventTarget.emit(e.Error,this,t),this.disconnect(),this.m_connected=!1},e.prototype.onClose=function(t){this.m_eventTarget.emit(e.Close,this,t),this.disconnect(),this.m_connected=!1},e.Connect="Connect",e.Close="Close",e.Error="Error",e.Message="Message",e}();n.Socket=o,n.onMsg=function(e){return function(t,n){t.msgList||(t.msgList=[]),t.msgList.push({msgID:e,methodName:n})}},cc._RF.pop()},{}],MKSystem:[function(e,t,n){"use strict";cc._RF.push(t,"a872ajJ9cJIZJgRz4rujdNB","MKSystem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.system=n.System=void 0;var a=function(){function e(){}return e.prototype.getVersion=function(){return""},e.prototype.getVersionCode=function(){return 1},e.prototype.getPackageName=function(){return""},e.prototype.getMetaData=function(){return""},e.prototype.getDeviceID=function(){return""},e.prototype.getLocation=function(){return""},e.prototype.getChannelID=function(){return""},e.prototype.copyStrToClipboard=function(){},e.prototype.getFileMD5=function(){return""},e.prototype.getPlatform=function(){return cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?cc.sys.OS_ANDROID:cc.sys.os==cc.sys.OS_IOS?cc.sys.OS_IOS:"Web":"Web"},e.prototype.getWakeUpData=function(){return""},e.prototype.shareText=function(){},e.prototype.shareInWhatsApp=function(){},e}();n.System=a;var r,s=function(e){function t(){var t=e.call(this)||this;t.version="",t.versionCode=1,t.packageName="",t.channelID="",t.version=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getVersion","()Ljava/lang/String;"),t.packageName=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getPackageName","()Ljava/lang/String;"),t.channelID=t.getMetaData("APP_CHANNEL");try{t.versionCode=jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getVersionCode","()J")}catch(n){}return t}return i(t,e),t.prototype.getVersion=function(){return this.version},t.prototype.getVersionCode=function(){return this.versionCode},t.prototype.getPackageName=function(){return this.packageName},t.prototype.getDeviceModel=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getDeviceModel","()Ljava/lang/String;")},t.prototype.getSystemVersion=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getSystemVersion","()Ljava/lang/String;")},t.prototype.getMetaData=function(e){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getMetaData","(Ljava/lang/String;)Ljava/lang/String;",e)},t.prototype.getDeviceID=function(){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getDeviceID","()Ljava/lang/String;")},t.prototype.getLocation=function(){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getLocation","()Ljava/lang/String;")},t.prototype.getChannelID=function(){return this.channelID},t.prototype.copyStrToClipboard=function(e){jsb.reflection.callStaticMethod("com/mk/common/MKSystem","copyStrToClipboard","(Ljava/lang/String;)V",e)},t.prototype.getFileMD5=function(e){return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getFileMD5","(Ljava/lang/String;)Ljava/lang/String;",e)},t.prototype.getWakeUpData=function(){return this.getVersionCode()<43?"":jsb.reflection.callStaticMethod("com/mk/common/MKSystem","getWakeUpData","()Ljava/lang/String;")},t.prototype.shareText=function(e,t){if(!(this.getVersionCode()<50))return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","shareText","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},t.prototype.shareInWhatsApp=function(e){if(!(this.getVersionCode()<50))return jsb.reflection.callStaticMethod("com/mk/common/MKSystem","shareToApp","(Ljava/lang/String;Ljava/lang/String;)V","com.whatsapp",e)},t}(a),c=function(e){function t(){var t=e.call(this)||this;return t.version="",t.packageName="",t.channelID="",t.version=jsb.reflection.callStaticMethod("MKSystem","getAppVersion"),t.packageName=jsb.reflection.callStaticMethod("MKSystem","getPackageName"),t.channelID=t.getMetaData("APP_CHANNEL"),t}return i(t,e),t.prototype.getVersion=function(){return this.version},t.prototype.getPackageName=function(){return this.packageName},t.prototype.getMetaData=function(e){return jsb.reflection.callStaticMethod("MKSystem","getMetaData:",e)},t.prototype.getDeviceID=function(){return jsb.reflection.callStaticMethod("MKSystem","getDeviceID")},t.prototype.getChannelID=function(){return this.channelID},t.prototype.copyStrToClipboard=function(e){jsb.reflection.callStaticMethod("MKSystem","copyStrToClipboard:",e)},t.prototype.getFileMD5=function(e){return jsb.reflection.callStaticMethod("MKSystem","getFileMD5:",e)},t}(a),l=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.getVersion=function(){return"1.0.0"},t.prototype.getVersionCode=function(){return 1},t.prototype.getPackageName=function(){return"com.kbsgame.teenpatti"},t.prototype.getDeviceModel=function(){return""},t.prototype.getSystemVersion=function(){return""},t.prototype.getMetaData=function(){return""},t.prototype.getLocation=function(){return""},t.prototype.getDeviceID=function(){return this.genMacFack()},t.prototype.getChannelID=function(){return"KBS"},t.prototype.genMacFack=function(){var e=cc.sys.localStorage.getItem("macFack");if(e)return e;e="";for(var t=0;t<6;t++){for(var n="",o=0;o<2;o++)n+="0123456789abcdef"[Math.ceil(15*Math.random())];e+=e?":"+n:n}return cc.sys.localStorage.setItem("macFack",e),e},t}(a);r=cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?new s:cc.sys.os==cc.sys.OS_IOS?new c:new l:new l,n.system=r,cc._RF.pop()},{}],MKUtils:[function(e,t,n){"use strict";cc._RF.push(t,"67818ViSbNBt7n0lfXcd04e","MKUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=void 0;class o{static randRange(e,t){return Math.floor(Math.random()*(t-e+1))+e}static strMaxCut(e,t){for(var n="",o=0,i=0;i<e.length;i++){var a=e[i];a.charCodeAt(0)>255?o+=2:o++,o<=t&&(n+=a)}return o>t?n+"...":n}static dateFormat(e,t){var n=new Date(t);let o;const i={"Y+":n.getFullYear().toString(),"m+":(n.getMonth()+1).toString(),"d+":n.getDate().toString(),"H+":n.getHours().toString(),"M+":n.getMinutes().toString(),"S+":n.getSeconds().toString()};for(let a in i)(o=new RegExp("("+a+")").exec(e))&&(e=e.replace(o[1],1==o[1].length?i[a]:i[a].padStart(o[1].length,"0")));return e}static getUrlParams(){if(cc.sys.isNative)return{};var e=window.location.search;return o.parseUrlParams(e)}static parseUrlParams(e){var t={},n=e.indexOf("?");if(-1!=n)for(var o=e.substr(n+1).split("&"),i=0;i<o.length;i++)t[o[i].split("=")[0]]=o[i].split("=")[1];return t}static resize(){var e=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=e.designResolution);var t=this.curDR,n=cc.view.getFrameSize(),o=n.width,i=n.height,a=o,r=i;o/i>t.width/t.height?a=(r=t.height)*o/i:r=i/o*(a=t.width),e.designResolution=cc.size(a,r),e.node.width=a,e.node.height=r,e.node.emit("resize")}static maxCountElement(e){let t={};for(let a=0;a<e.length;a++){let n=e[a];t[n]?t[n]++:t[n]=1}let n=0,o=[],i=[];for(let a in t)n<t[a]?(n=t[a],o[0]=a,i.length=0):n===t[a]&&i.push(a);if(i.length>0)for(let a=0;a<i.length;a++)o.push(i[a]);return o}static isEmail(e){return/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/.test(e)}static isPhone(e){return/^(\d*)$/.test(e)}static isUserName(e){return/^[A-Za-z0-9][A-Za-z0-9\s]*[A-Za-z0-9]$/.test(e)}}n.Utils=o,o.curDR=null,cc._RF.pop()},{}],MenuLayer:[function(e,t,n){"use strict";cc._RF.push(t,"0de2b6hsk5OQo/U/taIk3GO","MenuLayer");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../MobileKit/MKIndex"),a=e("./Common/PopupBase"),r=e("./Common/PopupManager"),s=e("../Business/Data/CommonDefine"),{ccclass:c,property:l,menu:u}=cc._decorator;let p=class extends a.default{constructor(){super(...arguments),this.animationDuration=0,this.btnPaytable=null,this.btnHelp=null,this.btnLanguage=null,this.toggleMusic=null,this.imgSoundOn=null,this.imgSoundOff=null,this.soundOn=!1}static get path(){return"Scenes/Game/menu_layer"}onLoad(){this.main||(this.main=this.node),this.btnPaytable.on(cc.Node.EventType.TOUCH_END,this.onTouchPaytable,this),this.btnHelp.on(cc.Node.EventType.TOUCH_END,this.onTouchHelp,this),this.btnLanguage.on(cc.Node.EventType.TOUCH_END,this.onTouchLanguage,this),this.toggleMusic.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff}onTouchClose(){this.hide()}onTouchPaytable(){r.default.show(s.PrefabList.PaytableLayer),this.hide()}onTouchHelp(){r.default.show(s.PrefabList.HelpLayer),this.hide()}onTouchLanguage(){r.default.show(s.PrefabList.LanguageLayer),this.hide()}onTouchSound(){this.soundOn=!this.soundOn,this.toggleMusic.spriteFrame=this.soundOn?this.imgSoundOn:this.imgSoundOff,i.AudioEngine.setEffectsEnabled(this.soundOn),i.AudioEngine.setMusicEnabled(this.soundOn)}};o([l(cc.Node)],p.prototype,"btnPaytable",void 0),o([l(cc.Node)],p.prototype,"btnHelp",void 0),o([l(cc.Node)],p.prototype,"btnLanguage",void 0),o([l(cc.Sprite)],p.prototype,"toggleMusic",void 0),o([l(cc.SpriteFrame)],p.prototype,"imgSoundOn",void 0),o([l(cc.SpriteFrame)],p.prototype,"imgSoundOff",void 0),p=o([c],p),n.default=p,cc._RF.pop()},{"../Business/Data/CommonDefine":"CommonDefine","../MobileKit/MKIndex":"MKIndex","./Common/PopupBase":"PopupBase","./Common/PopupManager":"PopupManager"}],PaytableLayer:[function(e,t,n){"use strict";cc._RF.push(t,"d7eb0s+xJhFcZNoWpGlXYfD","PaytableLayer");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const i=e("./Common/PopupBase"),{ccclass:a,property:r,menu:s}=cc._decorator;let c=class extends i.default{constructor(){super(...arguments),this.animationDuration=0}static get path(){return"Scenes/Game/paytable_larer"}onLoad(){this.main||(this.main=this.node)}onTouchClose(){this.hide()}};c=o([a],c),n.default=c,cc._RF.pop()},{"./Common/PopupBase":"PopupBase"}],PopupBase:[function(e,t,n){"use strict";cc._RF.push(t,"b6107kAL7dMzqZ3iXRw2h4a","PopupBase");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(t){a(t)}}function s(e){try{c(o.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:a,property:r}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.background=null,this.main=null,this.animationDuration=.3,this.blocker=null,this.options=null,this.finishCallback=null}show(e,t){return i(this,void 0,void 0,function*(){this.options=e,this.init(e),this.updateDisplay(e),this.onBeforeShow&&(yield this.onBeforeShow()),null==t&&(t=t<0?0:this.animationDuration),yield this.playShowAnimation(t),this.onAfterShow&&this.onAfterShow()})}hide(e=!1,t){return i(this,void 0,void 0,function*(){const n=this.node;if(0!==t){let e=this.blocker;e||((e=this.blocker=new cc.Node("blocker")).addComponent(cc.BlockInputEvents),e.setParent(n),e.setContentSize(n.getContentSize())),e.active=!0}this.onBeforeHide&&(yield this.onBeforeHide(e)),null==t&&(t=t<0?0:this.animationDuration),yield this.playHideAnimation(t),this.blocker&&(this.blocker.active=!1),n.active=!1,this.onAfterHide&&this.onAfterHide(e),this.finishCallback&&this.finishCallback(e)})}playShowAnimation(e){return new Promise(t=>{const n=this.background,o=this.main;this.node.active=!0,n.active=!0,n.opacity=0,o.active=!0,o.scale=.5,o.opacity=0,cc.tween(n).to(.5*e,{opacity:150}).start(),cc.tween(o).to(e,{scale:1,opacity:255},{easing:"backOut"}).call(t).start()})}playHideAnimation(e){return new Promise(t=>{cc.tween(this.background).delay(.5*e).to(.5*e,{opacity:0}).start(),cc.tween(this.main).to(e,{scale:.5,opacity:0},{easing:"backIn"}).call(t).start()})}init(e){}updateDisplay(e){}onBeforeShow(){return new Promise(e=>e())}onAfterShow(){}onBeforeHide(e){return new Promise(e=>e())}onAfterHide(e){}onSuspended(){return new Promise(e=>e())}};o([r({type:cc.Node,tooltip:!1})],s.prototype,"background",void 0),o([r({type:cc.Node,tooltip:!1})],s.prototype,"main",void 0),s=o([a],s),n.default=s,cc._RF.pop()},{}],PopupManager:[function(e,t,n){"use strict";cc._RF.push(t,"c0ea1lR4GpK0bTmoo90xNjo","PopupManager");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(t){a(t)}}function s(e){try{c(o.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const i=e("./PopupBase");var a,r;(function(e){e[e.Once=1]="Once",e[e.Normal=2]="Normal",e[e.Frequent=3]="Frequent"})(a||(a={})),function(e){e[e.Done=1]="Done",e[e.Failed=2]="Failed",e[e.Waiting=3]="Waiting"}(r||(r={}));class s{static get prefabCache(){return this._prefabCache}static get nodeCache(){return this._nodeCache}static get current(){return this._current}static get queue(){return this._queue}static get suspended(){return this._suspended}static get container(){return this._container||cc.Canvas.instance.node}static set container(e){this._container=e}static get CacheMode(){return a}static get ShowResultType(){return r}static show(e,t,n){return new Promise(a=>o(this,void 0,void 0,function*(){if(n=this.parseParams(n),this._current||this.locked){if(!n||!n.immediately)return this.push(e,t,n),void a(r.Waiting);this.locked=!1,yield this.suspend()}this._current={path:e,options:t,params:n};let s=this.getNodeFromCache(e);if(!cc.isValid(s)){this.loadStartCallback&&this.loadStartCallback();const t=yield this.load(e);if(this.loadFinishCallback&&this.loadFinishCallback(),!cc.isValid(t))return cc.warn("[PopupManager]","\u5f39\u7a97\u52a0\u8f7d\u5931\u8d25",e),this._current=null,void a(r.Failed);s=cc.instantiate(t)}const c=s.getComponent(i.default);if(!c)return cc.warn("[PopupManager]","\u672a\u627e\u5230\u5f39\u7a97\u7ec4\u4ef6",e),this._current=null,void a(r.Failed);this._current.popup=c,this._current.node=s,s.setParent(this.container),s.setSiblingIndex(cc.macro.MAX_ZINDEX),c.finishCallback=t=>o(this,void 0,void 0,function*(){t||(this.locked=this._suspended.length>0||this._queue.length>0,this.recycle(e,s,n.mode),this._current=null,a(r.Done),yield new Promise(e=>{cc.Canvas.instance.scheduleOnce(e,this.interval)}),this.next())}),c.show(t)}))}static hide(){cc.isValid(this._current.popup)&&this._current.popup.hide()}static getNodeFromCache(e){const t=this._nodeCache;if(t.has(e)){const n=t.get(e);if(cc.isValid(n))return n;t.delete(e)}const n=this._prefabCache;if(n.has(e)){const t=n.get(e);if(cc.isValid(t))return t.addRef(),cc.instantiate(t);n.delete(e)}return null}static next(){if(this._current||0===this._suspended.length&&0===this._queue.length)return;let e=null;if(e=this._suspended.length>0?this._suspended.shift():this._queue.shift(),this.locked=!1,cc.isValid(e.popup))return this._current=e,e.node.setParent(this.container),void e.popup.show(e.options);this.show(e.path,e.options,e.params)}static push(e,t,n){this._current||this.locked?(this._queue.push({path:e,options:t,params:n}),this._queue.sort((e,t)=>e.params.priority-t.params.priority)):this.show(e,t,n)}static suspend(){return o(this,void 0,void 0,function*(){if(!this._current)return;const e=this._current;this._suspended.push(e),yield e.popup.onSuspended(),yield e.popup.hide(!0),this._current=null})}static recycle(e,t,n){switch(n){case a.Once:this._nodeCache.delete(e),t.destroy(),this.release(e);break;case a.Normal:this._nodeCache.delete(e),t.destroy();break;case a.Frequent:t.removeFromParent(!1),this._nodeCache.set(e,t)}}static load(e){return new Promise(t=>{const n=this._prefabCache;if(n.has(e)){const o=n.get(e);if(cc.isValid(o))return void t(o);n.delete(e)}cc.resources.load(e,(o,i)=>{o?t(null):(n.set(e,i),t(i))})})}static release(e){const t=this._nodeCache;let n=t.get(e);n&&(t.delete(e),cc.isValid(n)&&n.destroy(),n=null);const o=this._prefabCache;let i=o.get(e);i&&(i.refCount<=1&&o.delete(e),i.decRef(),i=null)}static parseParams(e){return null==e?new c:"[object Object]"!==Object.prototype.toString.call(e)?(cc.warn("[PopupManager]","\u5f39\u7a97\u53c2\u6570\u65e0\u6548\uff0c\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570"),new c):(null==e.mode&&(e.mode=a.Normal),null==e.priority&&(e.priority=0),null==e.immediately&&(e.immediately=!1),e)}}n.default=s,s._prefabCache=new Map,s._nodeCache=new Map,s._current=null,s._queue=[],s._suspended=[],s.locked=!1,s._container=null,s.interval=.05,s.loadStartCallback=null,s.loadFinishCallback=null;class c{constructor(){this.mode=a.Normal,this.priority=0,this.immediately=!1}}cc._RF.pop()},{"./PopupBase":"PopupBase"}],PrefabPool:[function(e,t,n){"use strict";cc._RF.push(t,"66c96CKFiJAvYsrBV2ocv6V","PrefabPool");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:i,property:a}=cc._decorator;let r=class{static get(e,t=null){null==this.poolList[e]&&(this.poolList[e]=[]);let n,o=this.poolList[e];0==o.length?(n=cc.instantiate(cc.resources.get(e))).poolKey=e:n=o.pop();var i=t?n.getComponent(t):null;return i&&i.reuse&&i.reuse.apply(i,arguments),n}static put(e,t=null){let n=this.poolList[e.poolKey];if(n&&-1==n.indexOf(e)){e.removeFromParent(!1);var o=t?e.getComponent(t):null;o&&o.unuse&&o.unuse(),n.push(e)}}static clear(e){let t=this.poolList[e];if(t){for(let e=0,n=t.length;e<n;e++)t[e].destroy();t.length=0}}static clearAll(){for(let e in this.poolList)this.clear(e)}static size(e){let t=this.poolList[e];return t?t.length:0}};r.poolList={},r=o([i],r),n.default=r,cc._RF.pop()},{}],SceneController:[function(e,t,n){"use strict";cc._RF.push(t,"0e547EKRatPwbOjldagOfi/","SceneController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SceneController=n.CmdScene=void 0;var r=e("../../MobileKit/MKIndex"),s=e("../Data/CommonDefine"),c=function(){function e(e){this.sceneType=e}return a([r.createCommand],e)}();n.CmdScene=c;var l=function(e){function t(){var t=e.call(this)||this;return t.setName("SceneController"),r.commandCenter.registAllCommand(t),t}return i(t,e),t.prototype.onCmdScene=function(e){var t=e.sceneType,n=null;t===s.SceneType.Game?n="Game":t==s.SceneType.Loading?n="Loading":t==s.SceneType.Lobby&&(n="Lobby"),null!=n&&cc.director.loadScene(n)},a([r.onCommand(c)],t.prototype,"onCmdScene",null),t}(r.Controller);n.SceneController=l,cc._RF.pop()},{"../../MobileKit/MKIndex":"MKIndex","../Data/CommonDefine":"CommonDefine"}],UIUtils:[function(e,t,n){"use strict";cc._RF.push(t,"42718I/3LJJtKtCYuOhAlRx","UIUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.UIUtils=n.UnitKilo=n.UnitLakh=n.UnitCrore=void 0;const o=e("../../Business/Data/DataManager");n.UnitCrore=1e7,n.UnitLakh=1e5,n.UnitKilo=1e3;class i{}n.UIUtils=i,i.getShortNumber=function(e,t,a){e/=o.default.homeData.getChipsUnit();var r,s=Math.abs(e);return r=s>=n.UnitCrore?i.getShortStr(s,n.UnitCrore,"Cr"):s>=n.UnitLakh?i.getShortStr(s,n.UnitLakh,"L"):i.getSeparatorNumber(s,t),e<0?r="-"+r:e>0&&a&&(r="+"+r),r},i.getShortStr=function(e,t,n){var o=e/t;return i.getSeparatorNumber(o)+n},i.getSeparatorNumber=function(e,t=!1){var n=e%1;n=Math.floor(100*(n+cc.macro.FLT_EPSILON))/100;for(var o=Math.floor(e).toString(),i="",a=0,r=o.length;a<r;){var s=r-a;s>10?(i=i+o.substr(a,r-10)+",",a=r-10):s>7?(i=i+o.substr(a,r-7)+",",a=r-7):s>5?(i=i+o.substr(a,r-5)+",",a=r-5):s>3?(i=i+o.substr(a,r-3)+",",a=r-3):(i+=o.substr(a,r),a=r)}if(n>=.005){for(var c=n.toString();c.length<=3;)c+="0";i+=c.substr(1,c.length-1)}return 0==n&&t&&(i+=".00"),i},cc._RF.pop()},{"../../Business/Data/DataManager":"DataManager"}],UserData:[function(e,t,n){"use strict";cc._RF.push(t,"dad16pPzIBPJKEhCrLrDRq7","UserData"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=class{constructor(){this.m_uid="",this.m_nickName="",this.m_cert="",this.m_isLogined=!1,this.m_headUrl="",this.m_balance=0,this.m_selectChip=4,this.m_midBet=!1,this.reset()}reset(){this.m_uid="",this.m_nickName="",this.m_cert="",this.m_isLogined=!1,this.m_headUrl="",this.m_balance=0,this.m_selectChip=4,this.m_midBet=!1}setNickName(e){this.m_nickName=e}getNickName(){return this.m_nickName}setUid(e){this.m_uid=e}getUid(){return this.m_uid}setCert(e){this.m_cert=e}getCert(){return this.m_cert}setLogined(e){this.m_isLogined=e}isLogined(){return this.m_isLogined}getHeadUrl(){return this.m_headUrl}setHeadUrl(e){this.m_headUrl=e}getBalance(){return this.m_balance}setBalance(e){this.m_balance=e}getSelectChip(){return this.m_selectChip}setSelectChip(e){this.m_selectChip=e}getMidBet(){return this.m_midBet}setMidBet(e){this.m_midBet=e}},cc._RF.pop()},{}],i18nLabel:[function(e,t,n){"use strict";cc._RF.push(t,"3e7e1yL3ltF4Ld2ONOefDbB","i18nLabel");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.i18nLabel=void 0;const i=e("./MKLocalLang"),{ccclass:a,property:r,executeInEditMode:s,disallowMultiple:c,requireComponent:l,menu:u}=cc._decorator;let p=class extends cc.Component{constructor(){super(...arguments),this.i18n_string="",this.i18n_params=[]}start(){i.LocalLang._addOrDelLabel(this,!0),this._resetValue()}get string(){return this.i18n_string}set string(e){this.i18n_string=e,this.setEndValue()}get params(){return this.i18n_params}set params(e){this.i18n_params=e,this.setEndValue()}init(e,t){this.i18n_string=e,this.i18n_params=t,this.setEndValue()}setEndValue(){let e=this.getComponent(cc.Label);cc.isValid(e)&&(e.string=i.LocalLang.get(this.i18n_string,this.i18n_params))}_resetValue(){this.string=this.i18n_string}onDestroy(){i.LocalLang._addOrDelLabel(this,!1)}};o([r({visible:!1})],p.prototype,"i18n_string",void 0),o([r({visible:!1})],p.prototype,"i18n_params",void 0),o([r({type:cc.String})],p.prototype,"string",null),o([r({type:[cc.String]})],p.prototype,"params",null),p=o([a,s,l(cc.Label),c,u("\u591a\u8bed\u8a00/i18nLabel")],p),n.i18nLabel=p,cc._RF.pop()},{"./MKLocalLang":"MKLocalLang"}],i18nSprite:[function(e,t,n){"use strict";cc._RF.push(t,"a8777HUMEtKZKZSmfQV4Q10","i18nSprite");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.i18nSprite=void 0;const i=e("./MKLocalLang"),{ccclass:a,property:r,executeInEditMode:s,disallowMultiple:c,requireComponent:l,menu:u}=cc._decorator;let p=class extends cc.Component{constructor(){super(...arguments),this.i18n_string=""}start(){i.LocalLang._addOrDelSprite(this,!0),this._resetValue()}get string(){return this.i18n_string}set string(e){this.i18n_string=e;let t=this.getComponent(cc.Sprite);cc.isValid(t)&&i.LocalLang._getSprite(e,e=>{cc.isValid(t)&&(t.spriteFrame=e)})}_resetValue(){this.string=this.i18n_string}onDestroy(){i.LocalLang._addOrDelSprite(this,!1)}};o([r({visible:!1})],p.prototype,"i18n_string",void 0),o([r({type:cc.String})],p.prototype,"string",null),p=o([a,s,l(cc.Sprite),c,u("\u591a\u8bed\u8a00/i18nSprite")],p),n.i18nSprite=p,cc._RF.pop()},{"./MKLocalLang":"MKLocalLang"}]},{},["BetData","CommonDefine","ConfigManager","DataManager","HomeData","UserData","GameController","GameNotice","SceneController","HeartBeatHandler","MKAudioEngine","MKCryptoUtils","MKImageDownloader","MKLocalLang","MKSystem","MKUtils","i18nLabel","i18nSprite","MKActionQueue","MKCommandCenter","MKNoticeCenter","MKIndex","MKHttp","MKSocket","AwardLayer","BetCell","BetChip","ChipSettingLayer","PopupBase","PopupManager","PrefabPool","UIUtils","GameScene","LanguageLayer","LoadingConfig","LoadingScene","LobbyScene","LowBalanceLayer","MenuLayer","PaytableLayer"]);